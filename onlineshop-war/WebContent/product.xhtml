<ui:composition template="/template.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
				xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions">
<ui:define name="content">
  
    <div class="row" id="content">

	 	<h:form>
			<div class="col-sm-2">

				<div class="panel panel-info">
					<div class="panel-heading">
						<h4>#{msg['categories']}</h4>
					</div>
					<div class="panel-body">
	                    <div class="single">
	                        <ul class="list-unstyled">
		                        <c:forEach var="cat" items="#{productController.categories}">
		                        	<li>
								 		<h:commandLink action="#{productController.loadItems(cat)}">
									 		#{cat.description}
									 		<span class="pull-right">
									 			#{fn:length(cat.items)}
									 		</span>
									 		<f:ajax execute="productForm" render=":productForm" />
										</h:commandLink>
	                  				</li>    
	                         	</c:forEach>  
	                        </ul>
	                    </div>
					</div>		
				</div>
			</div>
	 	</h:form>     
   
	   <h:panelGroup id="productForm" >
			<div class="col-sm-10">
			  
				<c:forEach var="item" items="#{productController.items}">
		
					<div class="col-md-4">
			        	<div class="thumbnail">
			                <!-- <img src="http://tech.firstpost.com/wp-content/uploads/2014/09/Apple_iPhone6_Reuters.jpg" alt="" class="img-responsive"/> -->
			                <h:graphicImage url="image?id=#{item.id}" class="img-responsive"/>
			                <div class="caption">
			                  <h4 class="pull-right">CHF #{item.price}</h4>
			                  <h4><a href="#">#{item.title}</a></h4>
			                  <!-- <p>#{item.description}</p> -->
			                  <h:outputText value="#{fn:substring(item.description, 0, 40)}..." />
			                </div>
			                <div class="ratings">
			                  <p>
			                    <span class="glyphicon glyphicon-star"></span>
			                    <span class="glyphicon glyphicon-star"></span>
			                    <span class="glyphicon glyphicon-star"></span>
			                    <span class="glyphicon glyphicon-star"></span>
			                    <span class="glyphicon glyphicon-star"></span>
			                     (15 reviews)
			                  </p>
			                </div>
			                <!-- <div class="space-ten"></div> -->
			                <div class="btn-ground text-center">
			                   <h:form id="detailForm" prependId="false">
				                   <h:commandLink onclick="$('#product_view').modal('show');" class="btn btn-primary"
				                   				  action="#{productController.showItemDetail(item.id)}">Show Detail
				                    	<f:ajax render=":dialog-detail-form" />
				                   </h:commandLink>
			                   </h:form>
			                   <button type="button" class="btn btn-primary"><i class="fa fa-shopping-cart"></i> Add To Cart</button>
			                    <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#product_view"><i class="fa fa-search"></i> Quick View</button> -->
			                </div>
			                <div class="space-ten"></div>
			              </div>
					</div>            
		            
				</c:forEach>    
			
			</div>
		</h:panelGroup>
    </div>


<div class="modal fade product_view" id="product_view">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a href="#" data-dismiss="modal" class="class pull-right"><span class="glyphicon glyphicon-remove"></span></a>
                <h3 class="modal-title">Produkt Detail</h3>
            </div>
            <div class="modal-body">
                <div class="row">
                
	                <h:form id="dialog-detail-form">
	                
	                    <div class="col-md-6 product_img">
	                        <h:graphicImage url="image?id=#{productController.selectedItem.id}" class="img-responsive"/>
	                    </div>
	                    <div class="col-md-6 product_content">
	                        <h4><span>#{productController.selectedItem.title}</span></h4>
	                        <div class="rating">
	                            <span class="glyphicon glyphicon-star"></span>
	                            <span class="glyphicon glyphicon-star"></span>
	                            <span class="glyphicon glyphicon-star"></span>
	                            <span class="glyphicon glyphicon-star"></span>
	                            <span class="glyphicon glyphicon-star"></span>
	                            (10 reviews)
	                        </div>
	                        <p>
	                        	<h:outputText value="#{productController.selectedItem.description}"/>
	                        </p>
	                        <h3 class="cost">
								<h:outputText value="#{productController.selectedItem.price}">
									<f:convertNumber currencySymbol="CHF " type="currency" />
								</h:outputText>
							</h3>
								
	                        <div class="space-ten"></div>
	                        <div class="btn-ground">
	                            <button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-shopping-cart"></span> Add To Cart</button>
	                            <button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-heart"></span> Add To Wishlist</button>
	                        </div>
	                    </div>
                    
                    </h:form>
                    
                </div>
            </div>
        </div>
    </div>
</div>
</ui:define>
</ui:composition>