<ui:composition template="/template.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
				xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
	<ui:define name="content">

		<!-- <h:outputStylesheet library="css" name="styles.css"/> -->
	
		<div class="row">
					
			<div class="col-md-offset-1 col-md-10 col-md-offset-1">	
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title">#{msg['menu_purchase']}</h3>
					</div>
					<div class="panel-body">
					
						<h:form id="purchaseForm" prependId="false">
			
							<h:dataTable value="#{purchaseController.purchaseList}" var="purchase" 
										 class="table table-responsive table-bordered table-striped"
										 columnClasses="column1,column2,column3,column4,column5">                                                  > 
							    <h:column>
							        <f:facet name="header">#{msg.item_title}</f:facet>#{purchase.title}
							    </h:column>
							    <h:column>
							    	<f:facet name="header">#{msg.item_category}</f:facet>#{purchase.category.description}
							    </h:column> 
							    <h:column style="width: 50px;">
							        <f:facet name="header">#{msg.item_price}</f:facet>
							        <h:outputText value="#{purchase.price}" >
										<f:convertNumber pattern="#0.00" />
									</h:outputText>
							    </h:column>
							    <h:column>
							    	<f:facet name="header">#{msg.item_condition}</f:facet>#{purchase.condition.description}
							    </h:column> 
							   
							    <h:column>
							    	<f:facet name="header">#{msg.item_rating}</f:facet>#{purchase.seller.averageStars}
							    </h:column> 							  
							 
							    <h:column>
								    <h:commandLink class="btn btn-primary" onclick="$('#product_view').modal('show');"
								    			   action="#{purchaseController.rateSeller(purchase.id)}">Rate
			                   				  	   <f:ajax render=":dialog-myprofile-form" />
				                   </h:commandLink>
							    	
							    </h:column>
								
							</h:dataTable>
			                                     					
						</h:form>	
					
					</div>
				</div>				
			</div>
		</div>
		
		<div class="modal fade product_view" id="product_view">
		    <div class="modal-dialog">
		        <div class="modal-content">
		            <div class="modal-header">
		                <a href="#" data-dismiss="modal" class="class pull-right"><span class="glyphicon glyphicon-remove"></span></a>
		                <h3 class="modal-title">Produkt Detail</h3>
		            </div>
		            <div class="modal-body">
		            	<div class="row">
			                <h:form id="dialog-myprofile-form">
			                	<!-- <h:inputText value="#{purchaseController.selectedPurchase.id}" /> -->
			                	<h4>Product Id: <span>#{purchaseController.selectedPurchase.title}</span></h4>
			                	<h4>Product Id: <span>#{purchaseController.selectedPurchase.id}</span></h4>
			                	
			                	<p>Gesamtbewertung</p>
								<fieldset class="rating">
								    <legend>Please rate:</legend>
								    <input type="radio" id="star5" name="rating" value="5" /><label for="star5" title="Rocks!">5 stars</label>
								    <input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="Pretty good">4 stars</label>
								    <input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="Meh">3 stars</label>
								    <input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="Kinda bad">2 stars</label>
								    <input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="Sucks big time">1 star</label>
								</fieldset>
			                	
			                	<div class="form-group">
									<h:outputLabel value="#{msg['comment']}:"/>
									<h:inputTextarea value="#{purchaseController.comment}" rows="3" p:placeholder="#{msg['comment.placeholder']}" class="form-control"/>
									<!-- <textarea placeholder="#{msg['street.placeholder']}" rows="3" class="form-control"></textarea> -->
								</div>
			                	
			                	
			                	<h:commandLink 
									value="Update1"
									action="#{purchaseController.update(purchaseController.selectedPurchase.id)}"/>
								<h:commandLink 
									value="SAVE"
									action="#{purchaseController.update(2)}"/>
			                </h:form>
			            </div>
		            </div>
		        </div>
		     </div>
		</div>

	</ui:define>
</ui:composition>